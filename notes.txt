the type parameters are backwards in places because of where variables are being created, e.g. check (TProd r'a, Project x) creates r'b first
the effect list unions are backwards in places, they were written to place new values on the right but theyre being done inside right folds so they should be on the left