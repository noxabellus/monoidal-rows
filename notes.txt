the type parameters are backwards in places because of where variables are being created, e.g. check (TProd r'a, Project x) creates r'b first